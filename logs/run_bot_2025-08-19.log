2025-08-19 23:41:10,025 - Code.bot_core.tradestation_api - ERROR - Failed to refresh access token: 401
2025-08-19 23:42:19,288 - OrderManager - INFO - Loaded 0 active orders from database
2025-08-19 23:42:19,302 - PositionManager - INFO - Position collections initialized
2025-08-19 23:42:19,310 - PositionManager - INFO - Loaded 0 active positions from database
2025-08-19 23:42:19,348 - JigsawStrategy - INFO - Synced 0 active positions from position manager
2025-08-19 23:42:37,225 - BacktestRun_20250819_234237 - INFO - ================================================================================
2025-08-19 23:42:37,228 - BacktestRun_20250819_234237 - INFO - BACKTEST RUN ID: 20250819_234237
2025-08-19 23:42:37,229 - BacktestRun_20250819_234237 - INFO - Parameters: {'symbols': ['AAPL', 'NVDA'], 'timeframes': '1m', 'start_date': '2025-08-01', 'end_date': '2025-08-19', 'data_source': 'TradeStation'}
2025-08-19 23:42:37,230 - BacktestRun_20250819_234237 - INFO - Configuration: {'tickers': ['SPY', 'QQQ', 'TSLA', 'AAPL'], 'contracts_per_trade': 1, 'trailing_stop_method': 'Heiken Ashi Candle Trail (1-3 candle lookback)', 'no_trade_window_minutes': 3, 'auto_close_minutes': 15, 'cutoff_time': '15:15', 'ema_value': 15, 'failsafe_minutes': 20, 'adx_filter': True, 'adx_minimum': 20, 'news_filter': False, 'bb_width_threshold': 0.05, 'donchian_contraction_threshold': 0.6, 'volume_squeeze_threshold': 0.3, 'stop_loss_method': 'ATR Multiple', 'atr_multiple': 1.5, 'fixed_stop_percentage': 1.0, 'auto_trading_enabled': True, 'stochastic_k_period': 5, 'stochastic_d_period': 3, 'stochastic_smooth': 2, 'volume_spike_threshold': 1.5, 'liquidity_min_volume': 1000000, 'liquidity_min_oi': 500, 'liquidity_max_spread': 0.1, 'use_mag7_confirmation': False, 'sector_etfs': ['XLK', 'XLF', 'XLV', 'XLY'], 'sector_weight_threshold': 43, 'sector_weights': {'XLK': 32, 'XLF': 14, 'XLV': 11, 'XLY': 11}, 'mag7_stocks': ['AAPL', 'MSFT', 'AMZN', 'NVDA', 'GOOG', 'TSLA', 'META'], 'mag7_threshold': 60, 'mag7_price_change_threshold': 0.1, 'mag7_min_aligned': 5}
2025-08-19 23:42:37,231 - BacktestRun_20250819_234237 - INFO - ================================================================================
2025-08-19 23:42:37,432 - CandleDataClient - INFO - Fetching 18 days of 1m data from 2025-08-01 to 2025-08-19
2025-08-19 23:42:37,507 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,515 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,521 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,529 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,534 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,562 - BacktestEngine - ERROR - Error in backtest for AAPL: Failed to fetch data for all symbols from TradeStation
2025-08-19 23:42:37,645 - CandleDataClient - INFO - Fetching 18 days of 1m data from 2025-08-01 to 2025-08-19
2025-08-19 23:42:37,673 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,684 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,696 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,705 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,715 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-19 23:42:37,735 - BacktestEngine - ERROR - Error in backtest for NVDA: Failed to fetch data for all symbols from TradeStation
2025-08-19 23:44:26,133 - MarketDataClient - ERROR - WebSocket error: [Errno 11001] getaddrinfo failed
2025-08-19 23:44:26,135 - websocket - ERROR - [Errno 11001] getaddrinfo failed - goodbye
2025-08-19 23:44:26,135 - MarketDataClient - INFO - WebSocket closed: None
2025-08-19 23:44:36,091 - MarketDataClient - ERROR - Failed to establish TradeStation WebSocket connection within timeout
2025-08-19 23:44:36,092 - CandleBuilder - INFO - Stopped candle builder
2025-08-20 00:00:37,700 - OrderManager - INFO - Loaded 0 active orders from database
2025-08-20 00:00:37,717 - PositionManager - INFO - Position collections initialized
2025-08-20 00:00:37,723 - PositionManager - INFO - Loaded 0 active positions from database
2025-08-20 00:00:37,728 - JigsawStrategy - INFO - Synced 0 active positions from position manager
2025-08-20 00:01:04,669 - BacktestRun_20250820_000104 - INFO - ================================================================================
2025-08-20 00:01:04,671 - BacktestRun_20250820_000104 - INFO - BACKTEST RUN ID: 20250820_000104
2025-08-20 00:01:04,672 - BacktestRun_20250820_000104 - INFO - Parameters: {'symbols': ['AAPL', 'NVDA'], 'timeframes': '1m', 'start_date': '2025-01-01', 'end_date': '2025-08-20', 'data_source': 'YFinance'}
2025-08-20 00:01:04,674 - BacktestRun_20250820_000104 - INFO - Configuration: {'tickers': ['SPY', 'QQQ', 'TSLA', 'AAPL'], 'contracts_per_trade': 1, 'trailing_stop_method': 'Heiken Ashi Candle Trail (1-3 candle lookback)', 'no_trade_window_minutes': 3, 'auto_close_minutes': 15, 'cutoff_time': '15:15', 'ema_value': 15, 'failsafe_minutes': 20, 'adx_filter': True, 'adx_minimum': 20, 'news_filter': False, 'bb_width_threshold': 0.05, 'donchian_contraction_threshold': 0.6, 'volume_squeeze_threshold': 0.3, 'stop_loss_method': 'ATR Multiple', 'atr_multiple': 1.5, 'fixed_stop_percentage': 1.0, 'auto_trading_enabled': True, 'stochastic_k_period': 5, 'stochastic_d_period': 3, 'stochastic_smooth': 2, 'volume_spike_threshold': 1.5, 'liquidity_min_volume': 1000000, 'liquidity_min_oi': 500, 'liquidity_max_spread': 0.1, 'use_mag7_confirmation': False, 'sector_etfs': ['XLK', 'XLF', 'XLV', 'XLY'], 'sector_weight_threshold': 43, 'sector_weights': {'XLK': 32, 'XLF': 14, 'XLV': 11, 'XLY': 11}, 'mag7_stocks': ['AAPL', 'MSFT', 'AMZN', 'NVDA', 'GOOG', 'TSLA', 'META'], 'mag7_threshold': 60, 'mag7_price_change_threshold': 0.1, 'mag7_min_aligned': 5}
2025-08-20 00:01:04,685 - BacktestRun_20250820_000104 - INFO - ================================================================================
2025-08-20 00:01:05,107 - CandleDataClient - INFO - Fetching 231 days of 1m data from 2025-01-01 to 2025-08-20
2025-08-20 00:01:05,147 - CandleDataClient - ERROR - Failed to fetch external data: [!] ERROR: YFinance only provides 7 days of 1-minute data, but you requested 231 days
2025-08-20 00:01:05,156 - BacktestEngine - ERROR - Error in backtest for AAPL: [!] ERROR: YFinance only provides 7 days of 1-minute data, but you requested 231 days
2025-08-20 00:01:05,237 - CandleDataClient - INFO - Fetching 231 days of 1m data from 2025-01-01 to 2025-08-20
2025-08-20 00:01:11,167 - yfinance - ERROR - $XLV: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-21) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1755628269. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:11,836 - yfinance - ERROR - $XLF: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-21) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1755628269. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:12,566 - yfinance - ERROR - $XLY: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-21) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1755628270. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:13,257 - yfinance - ERROR - $XLK: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-21) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1755628271. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:13,857 - yfinance - ERROR - $NVDA: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-21) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1755628271. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:13,896 - BacktestEngine - ERROR - Error in backtest for NVDA: Failed to fetch data for all symbols from YFinance
2025-08-20 00:01:53,324 - BacktestRun_20250820_000153 - INFO - ================================================================================
2025-08-20 00:01:53,325 - BacktestRun_20250820_000153 - INFO - BACKTEST RUN ID: 20250820_000153
2025-08-20 00:01:53,326 - BacktestRun_20250820_000153 - INFO - Parameters: {'symbols': ['AAPL', 'NVDA'], 'timeframes': '1m', 'start_date': '2025-01-01', 'end_date': '2025-08-07', 'data_source': 'YFinance'}
2025-08-20 00:01:53,327 - BacktestRun_20250820_000153 - INFO - Configuration: {'tickers': ['SPY', 'QQQ', 'TSLA', 'AAPL'], 'contracts_per_trade': 1, 'trailing_stop_method': 'Heiken Ashi Candle Trail (1-3 candle lookback)', 'no_trade_window_minutes': 3, 'auto_close_minutes': 15, 'cutoff_time': '15:15', 'ema_value': 15, 'failsafe_minutes': 20, 'adx_filter': True, 'adx_minimum': 20, 'news_filter': False, 'bb_width_threshold': 0.05, 'donchian_contraction_threshold': 0.6, 'volume_squeeze_threshold': 0.3, 'stop_loss_method': 'ATR Multiple', 'atr_multiple': 1.5, 'fixed_stop_percentage': 1.0, 'auto_trading_enabled': True, 'stochastic_k_period': 5, 'stochastic_d_period': 3, 'stochastic_smooth': 2, 'volume_spike_threshold': 1.5, 'liquidity_min_volume': 1000000, 'liquidity_min_oi': 500, 'liquidity_max_spread': 0.1, 'use_mag7_confirmation': False, 'sector_etfs': ['XLK', 'XLF', 'XLV', 'XLY'], 'sector_weight_threshold': 43, 'sector_weights': {'XLK': 32, 'XLF': 14, 'XLV': 11, 'XLY': 11}, 'mag7_stocks': ['AAPL', 'MSFT', 'AMZN', 'NVDA', 'GOOG', 'TSLA', 'META'], 'mag7_threshold': 60, 'mag7_price_change_threshold': 0.1, 'mag7_min_aligned': 5}
2025-08-20 00:01:53,329 - BacktestRun_20250820_000153 - INFO - ================================================================================
2025-08-20 00:01:53,583 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:01:53,624 - CandleDataClient - ERROR - Failed to fetch external data: [!] ERROR: YFinance only provides 7 days of 1-minute data, but you requested 218 days
2025-08-20 00:01:53,630 - BacktestEngine - ERROR - Error in backtest for AAPL: [!] ERROR: YFinance only provides 7 days of 1-minute data, but you requested 218 days
2025-08-20 00:01:53,711 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:01:54,268 - yfinance - ERROR - $XLV: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-08) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1754625600. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:55,087 - yfinance - ERROR - $XLF: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-08) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1754625600. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:56,213 - yfinance - ERROR - $XLY: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-08) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1754625600. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:57,136 - yfinance - ERROR - $XLK: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-08) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1754625600. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:57,956 - yfinance - ERROR - $NVDA: possibly delisted; no price data found  (1m 2025-01-01 -> 2025-08-08) (Yahoo error = "1m data not available for startTime=1735707600 and endTime=1754625600. Only 8 days worth of 1m granularity data are allowed to be fetched per request.")
2025-08-20 00:01:58,019 - BacktestEngine - ERROR - Error in backtest for NVDA: Failed to fetch data for all symbols from YFinance
2025-08-20 00:02:55,801 - BacktestRun_20250820_000255 - INFO - ================================================================================
2025-08-20 00:02:55,801 - BacktestRun_20250820_000255 - INFO - BACKTEST RUN ID: 20250820_000255
2025-08-20 00:02:55,802 - BacktestRun_20250820_000255 - INFO - Parameters: {'symbols': ['AAPL', 'NVDA'], 'timeframes': '1m', 'start_date': '2025-01-01', 'end_date': '2025-08-07', 'data_source': 'TastyTrade'}
2025-08-20 00:02:55,802 - BacktestRun_20250820_000255 - INFO - Configuration: {'tickers': ['SPY', 'QQQ', 'TSLA', 'AAPL'], 'contracts_per_trade': 1, 'trailing_stop_method': 'Heiken Ashi Candle Trail (1-3 candle lookback)', 'no_trade_window_minutes': 3, 'auto_close_minutes': 15, 'cutoff_time': '15:15', 'ema_value': 15, 'failsafe_minutes': 20, 'adx_filter': True, 'adx_minimum': 20, 'news_filter': False, 'bb_width_threshold': 0.05, 'donchian_contraction_threshold': 0.6, 'volume_squeeze_threshold': 0.3, 'stop_loss_method': 'ATR Multiple', 'atr_multiple': 1.5, 'fixed_stop_percentage': 1.0, 'auto_trading_enabled': True, 'stochastic_k_period': 5, 'stochastic_d_period': 3, 'stochastic_smooth': 2, 'volume_spike_threshold': 1.5, 'liquidity_min_volume': 1000000, 'liquidity_min_oi': 500, 'liquidity_max_spread': 0.1, 'use_mag7_confirmation': False, 'sector_etfs': ['XLK', 'XLF', 'XLV', 'XLY'], 'sector_weight_threshold': 43, 'sector_weights': {'XLK': 32, 'XLF': 14, 'XLV': 11, 'XLY': 11}, 'mag7_stocks': ['AAPL', 'MSFT', 'AMZN', 'NVDA', 'GOOG', 'TSLA', 'META'], 'mag7_threshold': 60, 'mag7_price_change_threshold': 0.1, 'mag7_min_aligned': 5}
2025-08-20 00:02:55,804 - BacktestRun_20250820_000255 - INFO - ================================================================================
2025-08-20 00:02:56,035 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:02:56,110 - BacktestEngine - ERROR - Error in backtest for AAPL: [!] TastyTrade API not available - requires login
2025-08-20 00:02:56,164 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:02:56,217 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:02:56,257 - BacktestEngine - ERROR - Error in backtest for NVDA: [!] TastyTrade API not available - requires login
2025-08-20 00:02:56,309 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:03:26,300 - BacktestRun_20250820_000326 - INFO - ================================================================================
2025-08-20 00:03:26,301 - BacktestRun_20250820_000326 - INFO - BACKTEST RUN ID: 20250820_000326
2025-08-20 00:03:26,301 - BacktestRun_20250820_000326 - INFO - Parameters: {'symbols': ['AAPL', 'NVDA'], 'timeframes': '1m', 'start_date': '2025-01-01', 'end_date': '2025-08-07', 'data_source': 'TradeStation'}
2025-08-20 00:03:26,301 - BacktestRun_20250820_000326 - INFO - Configuration: {'tickers': ['SPY', 'QQQ', 'TSLA', 'AAPL'], 'contracts_per_trade': 1, 'trailing_stop_method': 'Heiken Ashi Candle Trail (1-3 candle lookback)', 'no_trade_window_minutes': 3, 'auto_close_minutes': 15, 'cutoff_time': '15:15', 'ema_value': 15, 'failsafe_minutes': 20, 'adx_filter': True, 'adx_minimum': 20, 'news_filter': False, 'bb_width_threshold': 0.05, 'donchian_contraction_threshold': 0.6, 'volume_squeeze_threshold': 0.3, 'stop_loss_method': 'ATR Multiple', 'atr_multiple': 1.5, 'fixed_stop_percentage': 1.0, 'auto_trading_enabled': True, 'stochastic_k_period': 5, 'stochastic_d_period': 3, 'stochastic_smooth': 2, 'volume_spike_threshold': 1.5, 'liquidity_min_volume': 1000000, 'liquidity_min_oi': 500, 'liquidity_max_spread': 0.1, 'use_mag7_confirmation': False, 'sector_etfs': ['XLK', 'XLF', 'XLV', 'XLY'], 'sector_weight_threshold': 43, 'sector_weights': {'XLK': 32, 'XLF': 14, 'XLV': 11, 'XLY': 11}, 'mag7_stocks': ['AAPL', 'MSFT', 'AMZN', 'NVDA', 'GOOG', 'TSLA', 'META'], 'mag7_threshold': 60, 'mag7_price_change_threshold': 0.1, 'mag7_min_aligned': 5}
2025-08-20 00:03:26,307 - BacktestRun_20250820_000326 - INFO - ================================================================================
2025-08-20 00:03:26,545 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:03:29,818 - Code.bot_core.tradestation_api - ERROR - Failed to refresh access token: 401
2025-08-20 00:03:33,651 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:33,677 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:33,701 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:33,721 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:33,742 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:33,807 - BacktestEngine - ERROR - Error in backtest for AAPL: Failed to fetch data for all symbols from TradeStation
2025-08-20 00:03:33,939 - CandleDataClient - INFO - Fetching 218 days of 1m data from 2025-01-01 to 2025-08-07
2025-08-20 00:03:34,018 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:34,044 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:34,066 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:34,087 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:34,110 - TradeStationDataFetcher - ERROR - Error fetching bars: name 'requests' is not defined
2025-08-20 00:03:34,164 - BacktestEngine - ERROR - Error in backtest for NVDA: Failed to fetch data for all symbols from TradeStation
